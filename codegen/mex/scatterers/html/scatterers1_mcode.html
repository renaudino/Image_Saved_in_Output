<!-- saved from url=(0014)about:internet -->
<html>
<body>
<script src="resources/eml_report_loadable_data.js"></script>
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T1U3">DSN</span>, <span class="var type1" id="S3T2U4">PDS</span>, <span class="var type1" id="S4T3U5">FDS</span>, <span class="var type1" id="S5T4U6">Area</span>] = scatterers (<span class="var type1" id="S6T1U9">ebl</span>, <span class="var type1" id="S7T5U10">vtx_re</span>, <span class="var type1" id="S3T2U11">PDS</span>, <span class="var type1" id="S4T3U12">FDS</span>, <span class="var type1" id="S5T4U13">Area</span>) <span class="comment">% (OR): modified on 16.11.2016</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2"> 2</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">% Searches for the blocks and faces which experience scattering: calculating scattering points</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4"> 4</a></span><span class="line"><span class="comment">% locations --- 'dispoints'</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5"> 5</a></span><span class="line"><span class="comment">% </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line"><span class="comment">% Author: Xuhong Li &lt;xuhong@ftw.at&gt;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line"><span class="comment">% </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line"><span class="comment">% History: 2013.10.10</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S8T0U15">Nblock</span> <span class="var type0" id="S9T0U16">vnfaces</span> <span class="var type0" id="S10T0U17">wedges</span> <span class="var type0" id="S11T0U18">DSFlag</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11">11</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12">12</a></span><span class="line"><span class="mxinfo " id="T1:U10"><span class="var type1" id="S2T1U21">DSN</span> = <span class="mxinfo " id="T1:U12">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13">13</a></span><span class="line"><span class="mxinfo " id="T5:U13"><span class="var type1" id="S12T5U25">vtx</span> = <span class="mxinfo " id="T5:U15">reshape(<span class="var type1" id="S7T5U28">vtx_re</span>,3,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14">14</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15">15</a></span><span class="line"><span class="mxinfo " id="T5:U17"><span class="var type1" id="S14T5U33">cntpt</span> = <span class="mxinfo " id="T5:U19">zeros(<span class="mxinfo " id="T1:U20">3</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16">16</a></span><span class="line"><span class="mxinfo " id="T5:U21"><span class="var type1" id="S16T5U40">vnfaces_re</span> = <span class="mxinfo " id="T5:U23">zeros(<span class="mxinfo " id="T1:U24">3</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17">17</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18">18</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S17T1U47">i</span> = <span class="mxinfo " id="T1:U26">1</span>:<span class="var type1" id="S8T1U50">Nblock</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19">19</a></span><span class="line">    <span class="keyword">if</span> (<span class="mxinfo " id="T6:U28"><span class="var type1" id="S17T1U55">i</span> ~= <span class="var type1" id="S6T1U56">ebl</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20">20</a></span><span class="line">        <span class="keyword">if</span> (<span class="mxinfo " id="T6:U31"><span class="mxinfo " id="T1:U32"><span class="var type1" id="S11T7U62">DSFlag</span>(<span class="var type1" id="S17T1U63">i</span>)</span> == <span class="mxinfo " id="T1:U35">1</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21">21</a></span><span class="line">            <span class="keyword">for</span> <span class="var type1" id="S18T1U67">j</span> = <span class="mxinfo " id="T1:U37">1</span>:6</span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22">22</a></span><span class="line">                <span class="mxinfo " id="T5:U38"><span class="mxinfo " id="T5:U39"><span class="var type1" id="S14T5U74">cntpt</span>(<span class="mxinfo " id="T8:U41">:</span>,<span class="mxinfo " id="T1:U42">1</span>)</span>      = <span class="mxinfo " id="T9:U43">(<span class="mxinfo " id="T9:U44"><span class="mxinfo " id="T9:U45"><span class="mxinfo " id="T9:U46"><span class="mxinfo " id="T9:U47"><span class="var type1" id="S10T10U83">wedges</span>(<span class="var type1" id="S17T1U84">i</span>,<span class="var type1" id="S18T1U85">j</span>,<span class="mxinfo " id="T11:U51">1</span>,<span class="mxinfo " id="T8:U52">:</span>)</span>+<span class="mxinfo " id="T9:U53"><span class="var type1" id="S10T10U89">wedges</span>(<span class="var type1" id="S17T1U90">i</span>,<span class="var type1" id="S18T1U91">j</span>,<span class="mxinfo " id="T1:U57">2</span>,<span class="mxinfo " id="T8:U58">:</span>)</span></span>+<span class="mxinfo " id="T9:U59"><span class="var type1" id="S10T10U95">wedges</span>(<span class="var type1" id="S17T1U96">i</span>,<span class="var type1" id="S18T1U97">j</span>,<span class="mxinfo " id="T1:U63">3</span>,<span class="mxinfo " id="T8:U64">:</span>)</span></span>+<span class="mxinfo " id="T9:U65"><span class="var type1" id="S10T10U101">wedges</span>(<span class="var type1" id="S17T1U102">i</span>,<span class="var type1" id="S18T1U103">j</span>,<span class="mxinfo " id="T1:U69">4</span>,<span class="mxinfo " id="T8:U70">:</span>)</span></span>)/4</span></span>; <span class="comment">% (OR): centroids</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23">23</a></span><span class="line">                <span class="mxinfo " id="T5:U71"><span class="var type1" id="S19T5U109">difftest</span>        = <span class="mxinfo " id="T5:U73"><span class="var type1" id="S12T5U111">vtx</span>-<span class="var type1" id="S14T5U112">cntpt</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24">24</a></span><span class="line">                <span class="mxinfo " id="T5:U76"><span class="mxinfo " id="T5:U77"><span class="var type1" id="S16T5U116">vnfaces_re</span>(<span class="mxinfo " id="T8:U79">:</span>,<span class="mxinfo " id="T11:U80">1</span>)</span> = <span class="mxinfo " id="T12:U81"><span class="var type1" id="S9T13U120">vnfaces</span>(<span class="var type1" id="S17T1U121">i</span>,<span class="var type1" id="S18T1U122">j</span>,<span class="mxinfo " id="T8:U85">:</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,25" id="srcline25">25</a></span><span class="line">                </span></span>
<span class="srcline"><span class="lineno"><a href="1,26" id="srcline26">26</a></span><span class="line">                <span class="keyword">if</span> (<span class="mxinfo " id="T6:U86">(<span class="mxinfo " id="T1:U87"><span class="mxinfo " id="T14:U88"><span class="var type1" id="S16T5U131">vnfaces_re</span>'</span>*<span class="var type1" id="S19T5U132">difftest</span></span>) &gt; <span class="mxinfo " id="T1:U91">0</span></span>) <span class="comment">%(dot(vnfaces_re,difftest) &gt; 0)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,27" id="srcline27">27</a></span><span class="line">                    [<span class="var type1" id="S20T15U137">points</span>,<span class="var type1" id="S21T1U138">n</span>,<span class="var type1" id="S22T16U139">space</span>]   = <span class="fcn" id="F183N2:B141">dispointsQP</span>(<span class="var type1" id="S17T1U142">i</span>,<span class="var type1" id="S18T1U143">j</span>,<span class="var type1" id="S12T5U144">vtx</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,28" id="srcline28">28</a></span><span class="line">                    </span></span>
<span class="srcline"><span class="lineno"><a href="1,29" id="srcline29">29</a></span><span class="line">                    <span class="mxinfo " id="T15:U98"><span class="mxinfo " id="T15:U99"><span class="var type1" id="S3T2U148">PDS</span>(<span class="mxinfo " id="T16:U101"><span class="mxinfo " id="T1:U102"><span class="var type1" id="S2T1U151">DSN</span>+1</span>:<span class="mxinfo " id="T1:U104"><span class="var type1" id="S2T1U154">DSN</span>+<span class="var type1" id="S21T1U155">n</span></span></span>,<span class="mxinfo " id="T8:U107">:</span>)</span> = <span class="var type1" id="S20T15U157">points</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,30" id="srcline30">30</a></span><span class="line">                    </span></span>
<span class="srcline"><span class="lineno"><a href="1,31" id="srcline31">31</a></span><span class="line">                    <span class="mxinfo " id="T17:U109"><span class="var type1" id="S24T17U160">faces</span>              = <span class="mxinfo " id="T17:U111">zeros(<span class="var type1" id="S21T1U163">n</span>,<span class="mxinfo " id="T1:U113">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,32" id="srcline32">32</a></span><span class="line">                    <span class="mxinfo " id="T16:U114"><span class="mxinfo " id="T16:U115"><span class="var type1" id="S24T17U168">faces</span>(<span class="mxinfo " id="T18:U117">:</span>,<span class="mxinfo " id="T11:U118">1</span>)</span>         = <span class="var type1" id="S17T1U171">i</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,33" id="srcline33">33</a></span><span class="line">                    <span class="mxinfo " id="T16:U120"><span class="mxinfo " id="T16:U121"><span class="var type1" id="S24T17U175">faces</span>(<span class="mxinfo " id="T18:U123">:</span>,<span class="mxinfo " id="T11:U124">2</span>)</span>         = <span class="var type1" id="S18T1U178">j</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,34" id="srcline34">34</a></span><span class="line">                    </span></span>
<span class="srcline"><span class="lineno"><a href="1,35" id="srcline35">35</a></span><span class="line">                    <span class="mxinfo " id="T17:U126"><span class="mxinfo " id="T17:U127"><span class="var type1" id="S4T3U182">FDS</span>(<span class="mxinfo " id="T16:U129"><span class="mxinfo " id="T1:U130"><span class="var type1" id="S2T1U185">DSN</span>+1</span>:<span class="mxinfo " id="T1:U132"><span class="var type1" id="S2T1U188">DSN</span>+<span class="var type1" id="S21T1U189">n</span></span></span>,<span class="mxinfo " id="T19:U135">:</span>)</span> = <span class="var type1" id="S24T17U191">faces</span></span>;  <span class="comment">% surface index</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,36" id="srcline36">36</a></span><span class="line">                    <span class="mxinfo " id="T20:U137"><span class="mxinfo " id="T20:U138"><span class="var type1" id="S5T4U195">Area</span>(<span class="mxinfo " id="T16:U140"><span class="mxinfo " id="T1:U141"><span class="var type1" id="S2T1U198">DSN</span>+1</span>:<span class="mxinfo " id="T1:U143"><span class="var type1" id="S2T1U201">DSN</span>+<span class="var type1" id="S21T1U202">n</span></span></span>)</span>  = <span class="var type1" id="S22T16U203">space</span></span>;  <span class="comment">% tile size</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,37" id="srcline37">37</a></span><span class="line">                    <span class="mxinfo " id="T1:U147"><span class="var type1" id="S2T1U206">DSN</span>                = <span class="mxinfo " id="T1:U149"><span class="var type1" id="S2T1U208">DSN</span>+<span class="var type1" id="S21T1U209">n</span></span></span>;  <span class="comment">% tile number on corresponding surface</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,38" id="srcline38">38</a></span><span class="line">                <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,39" id="srcline39">39</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,40" id="srcline40">40</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,41" id="srcline41">41</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,42" id="srcline42">42</a></span><span class="line"><span class="keyword"><span class="keyword">end</span></span></span></span>
</pre>
</body>
</html>
